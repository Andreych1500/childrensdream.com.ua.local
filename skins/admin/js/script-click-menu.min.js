$(document).ready(function(){$(".new-info").click(function(){$(".info-open-click").css("left",$(this).offset().left).slideToggle("normal")});$(".navigation li").click(function(){if($(".active-section").length==0){$.cookie("act-menu",$(this).index(),{expires:14,path:"/"})}if($(this).is(".act-navigation")){$.removeCookie("act-menu",{path:"/"});$(this).removeAttr("class");$(".navigation-lv2").removeClass("act-nav-lv2");$(".section-lv2").removeClass("act-section")}else{$.cookie("act-menu",$(this).index(),{expires:14,path:"/"});$(".navigation .act-navigation").removeAttr("class");$(this).addClass("act-navigation");$(".navigation-lv2").addClass("act-nav-lv2");$(".section-lv2").removeClass("act-section").eq($(this).index()).addClass("act-section")}});$(".list-sec-menu").click(function(d){if(d.target.className=="list-sec-menu"||"act-list"){var c=$(d.target);var b=$(c).parent(".section-lv2").index()+":"+$(c).index();var a=[];if($(c).is(".act-list")){$(c).find(".section-module").slideUp("middle",function(){$(c).removeClass("act-list")})}else{$(c).find(".section-module").slideDown("middle",function(){$(c).addClass("act-list")})}if($.cookie("act-menu-lv2")!==undefined){var f=JSON.parse($.cookie("act-menu-lv2"));if($.inArray(b,f)>=0){f=$.grep(f,function(e){return e!==b});if(f.length<=0){$.removeCookie("act-menu-lv2",{path:"/"})}else{$.cookie("act-menu-lv2",JSON.stringify(f),{expires:14,path:"/"})}}else{f.push(b);$.cookie("act-menu-lv2",JSON.stringify(f),{expires:14,path:"/"})}}else{a.push(b);$.cookie("act-menu-lv2",JSON.stringify(a),{expires:14,path:"/"})}}});$(".to-admin").click(function(){$.removeCookie("active-menu",{path:"/"})});$(".tabs-panel li").click(function(){$(".tabs-panel li").removeAttr("class");$(this).addClass("active-tab");$(".content-form .tabs").removeClass("active-block-tabs").eq($(this).index()).addClass("active-block-tabs")});$('.reload-file[href$="?backup=ok"]').click(function(){if($(".operation-info").length==0){setTimeout(function(){$(".bottom-table").append('<div class="operation-info">Зачекайте будь-ласка!<img src="/skins/admin/img/load.gif" alt="loading"></div>');$(".operation-info").slideDown("middle")},600)}});$(".add-el-list").click(function(){if($(this).attr("data-type")=="text"){$(this).before('<input type="'+$(this).attr("data-type")+'" name="'+$(this).attr("data-name")+'" value="" '+$(this).attr("data-attr")+">")}if($(this).attr("data-type")=="textarea"){$(this).before('<textarea name="'+$(this).attr("data-name")+'" '+$(this).attr("data-attr")+"></textarea>")}});$('input[name="all_cheked"]').click(function(){if($(this).is(":checked")==true){$(".illustration-table tr:not(:first-child) td:first-child input").each(function(){$(this).prop("checked",true).parents("tr").addClass("c-checked")})}else{$(".illustration-table tr:not(:first-child) td:first-child input").each(function(){$(this).prop("checked",false).parents("tr").removeClass("c-checked")})}});$('.illustration-table tr:not(:first-child) td:first-child input[type="checkbox"]').click(function(){if($(this).is(":checked")==true){$(this).parents("tr").addClass("c-checked")}else{$(this).parents("tr").removeClass("c-checked")}});$(".illustration-table tr:not(:first-child) td:not(:first-child)").dblclick(function(){if($(this).parents(".c-checked").length==0){var a=$(this).parents("tr").find('.menu-update a[href*="?edit="], a:first-child').attr("href");if(a!==undefined){document.location.href=a}}});$(".add-field-filter").click(function(){var a=$(".filter-option-list");if($(a).css("display")=="none"){$(this).before('<span class="triangle"></span>');$(a).slideDown("middle")}if($(a).css("display")=="block"){$(document).mouseup(function(b){if(!$(a).is(b.target)&&$(a).has(b.target).length===0){$(a).slideUp("middle",function(){$(".triangle").remove()})}})}});$(".filter-option-list div").click(function(){var a=$(this).index();var b=[];if($(this).is(".act-option")){$(this).removeClass("act-option");$(".filter .input-value").eq(a).fadeOut("slow",function(){if($(this).find("input").length){$(this).find('input[name^="filter"]').attr("value","")}else{if($(this).find("select").length){$(this).find("select option").removeAttr("selected").eq(0).attr("selected",true)}}$(this).find("input, select").attr("disabled",true)})}else{$(this).addClass("act-option");$(".filter .input-value").eq(a).fadeIn("slow",function(){$(this).find("input, select").attr("disabled",false)})}if($.cookie("filter")!==undefined){var c=JSON.parse($.cookie("filter"));if($.inArray(a,c)>=0){c=$.grep(c,function(d){return d!==a});if(c.length<=0){$.removeCookie("filter",{path:window.location.pathname})}else{$.cookie("filter",JSON.stringify(c),{expires:30,path:window.location.pathname})}}else{c.push(a);$.cookie("filter",JSON.stringify(c),{expires:30,path:window.location.pathname})}}else{b.push(a);$.cookie("filter",JSON.stringify(b),{expires:30,path:window.location.pathname})}});$('.illustration-table input[name^="ids"], input[name="all_cheked"]').click(function(){if($(".illustration-table tr:not(:first-child) td:first-child input:checked").length>0){$(".dynamicEdit").addClass("dynamicEdit-act").attr("onclick","editElements()")}else{$(".dynamicEdit").removeClass("dynamicEdit-act").removeAttr("onclick")}})});function getInfoFile(a,b){$("#control").attr({"data-size":$(a).parents(".upload_file").attr("data-size"),"data-set":$(a).parents(".upload_file").attr("id"),"data-dir":b}).trigger("click")}function resetFile(a){a.replaceWith(a.clone(true))}function addPhoto(b){if($(b).val().length>1){var c=new FormData($("#to_file")[0]);c.append("directory",$(b).attr("data-dir"));c.append("size",$(b).attr("data-size"));var a=$("#"+$(b).attr("data-set"));$.ajax({url:"/admin/setting/personal-interface/?addPhoto=ok&ajax=ok",type:"POST",data:c,cache:false,contentType:false,processData:false,success:function(e){var f=JSON.parse(e);if(a.find('input[name^="del"]').val()!=""){var d=a.find('input[name^="del"]').val()}if(d!==undefined&&d.length>0){$.ajax({url:"/admin/setting/personal-interface/?delPhoto=ok&ajax=ok",type:"POST",data:{file_delete:d},cache:false})}if(f.error!==undefined){a.find("button + input").val("");a.find("button").text("Вибрати файл");a.find(".photos").addClass("hidden").find("img").removeAttr("src");alert("Загружайте лише фото!")}else{a.find('button + input[type="hidden"]').attr("value",f.file+"|"+f.name_dir+"|"+f.name_file);a.find("button").text(f.name_file);a.find('input[name^="del"]').val(f.file);a.find(".photos").removeClass("hidden");a.find(".photos img").attr("src",f.file)}resetFile($("#control"))}})}}function deleteList(a){var b=window.event;if(b.shiftKey&&b.keyCode==46&&$(a).index()!=0){$(a).remove()}}function openMenuUpdate(a){var b=$(a).siblings(".menu-update");if($(b).css("display")=="none"){b.slideDown("middle").parents("tr").find("td").css("background","#E2E7CB")}if($(b).css("display")=="block"){$(document).mouseup(function(c){if(!$(b).is(c.target)&&$(b).has(c.target).length===0){$(b).slideUp("middle").parents("tr").find("td").removeAttr("style")}})}}function okFrom(){return confirm("Ви підтверджуєте свою дію?")}function editElements(){var i=$(".illustration-table tr:not(:first-child) td:first-child input:checked");var g={};var e=[];var f=[];var h=[];$(".dynamicEdit").removeAttr("onclick").removeClass("dynamicEdit").html('<input type="submit" value="Зберегти" name="el-save"><a href="'+document.location.pathname+'" class="no-save">Відмінити</a>');$(i).each(function(l,m){var k=$(m).parents("tr").find('td[data-input^="ex|"]');for(l=0;l<k.length;++l){e.push($(k).eq(l))}g[$(m).val()]=e;e=[]});for(var c in g){for(var a in g[c]){var j=g[c][a].attr("data-input").split("|").splice(1,2);if(j[0]=="text"){h.push('<input type="text" name="'+j[1]+'" value="'+g[c][a].text()+'">')}if(j[0]=="email"){h.push('<input type="email" name="'+j[1]+'" value="'+g[c][a].text()+'">')}if(j[0]=="number"){h.push('<input min="1" type="number" name="'+j[1]+'" value="'+g[c][a].text()+'">')}if(j[0]=="checkbox"){var d="checked";if(g[c][a].text().trim()=="Ні"||g[c][a].text().trim()=="Нет"||g[c][a].text().trim()=="No"){d=""}h.push("<input "+d+'  type="checkbox" name="'+j[1]+'" value="1">')}}f[c]=h;h=[]}$('.illustration-table tr:not(:first-child) td:first-child input, input[name="all_cheked"]').attr("disabled",true);for(var b in f){for(var a in f[b]){$('td[data-input$="'+$(f[b][a]).attr("name")+'"]').html(f[b][a])}}};